<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="A cute Valentine's Day page to ask someone to be your Valentine!" />
  <meta name="theme-color" content="#ffd0e5" />
  <title>Valentine's Day</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

  <style>
    .gradient-background {
      background: linear-gradient(180deg, #ffd0e5 0%, #ffe8f2 36%, #ffffff 100%);
      min-height: 100vh;
    }

    .bounce {
      animation: bounce 2s ease infinite;
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-20px); }
      60% { transform: translateY(-10px); }
    }

    .fade {
      transition: opacity 0.3s ease-in-out;
    }
  </style>
</head>

<body class="gradient-background">
  <main class="flex items-center justify-center h-screen">
    <section class="flex flex-col items-center p-4">
      <img
        id="imageDisplay"
        src="./images/image1.gif"
        alt="Cute kitten with flowers"
        class="rounded-md h-[300px] object-cover fade"
      />

      <h1 id="valentineQuestion"
        class="text-4xl font-bold italic text-[#bd1e59] my-4">
        Ishu baby, will you be my Valentine?
      </h1>

      <div id="responseButtons" class="flex gap-4 pt-5 items-center">
        <button
          id="yesButton"
          class="bounce inline-flex items-center justify-center rounded-md text-xl font-medium cursor-pointer px-4 py-2 bg-green-500 text-white transition-all duration-300 hover:bg-green-400 min-h-12 min-w-[75px]"
        >
          Yes
        </button>

        <button
          id="noButton"
          class="inline-flex items-center justify-center rounded-md text-xl font-medium cursor-pointer px-4 py-2 bg-red-500 text-white transition-colors hover:bg-red-700 h-12 min-w-[75px]"
        >
          No
        </button>
      </div>
    </section>
  </main>

  <script>
    (() => {
      const yesButton = document.getElementById("yesButton");
      const noButton = document.getElementById("noButton");
      const imageDisplay = document.getElementById("imageDisplay");
      const valentineQuestion = document.getElementById("valentineQuestion");
      const responseButtons = document.getElementById("responseButtons");

      const GROWTH_PER_CLICK = 35;
      const FONT_GROWTH_PER_CLICK = 25;
      const MAX_NO_CLICKS = 5;

      const IMAGE_PATHS = [
        "./images/image1.gif",
        "./images/are_u_sure_image.gif",
        "./images/smart_cat.gif",
        "./images/image8.gif",
        "./images/image5.gif",
        "./images/crying_cat_image.gif",
        "./images/yes_image.gif",
      ];

      const NO_BUTTON_MESSAGES = [
        "No",
        "Are you sure???",
        "Aisa munda nhi milega phir sochlo?",
        "Pleasseee na my love :(",
        "Now u are breaking my heart....",
        "I'm gonna cry ab...",
      ];

      const ALT_TEXTS = [
        "Cute kitten with flowers",
        "Sad kitten looking up",
        "Kitten begging",
        "Heartbroken kitten",
        "Crying kitten",
        "Devastated kitten",
        "Happy kitten celebrating",
      ];

      let noClickCount = 0;
      let buttonHeight = 48;
      let buttonWidth = 80;
      let fontSize = 20;

      /* ================================
         ðŸ”¥ IMAGE PRELOAD + DECODE FIX
      ================================== */
      const preloadedImages = [];

      function preloadImages() {
        IMAGE_PATHS.forEach((src) => {
          const img = new Image();
          img.src = src;

          if (img.decode) {
            img.decode().catch(() => {});
          }

          preloadedImages.push(img);
        });
      }

      preloadImages();

      /* ================================
         Smooth Image Transition
      ================================== */
      function changeImage(index) {
        imageDisplay.style.opacity = 0;

        setTimeout(() => {
          imageDisplay.src = IMAGE_PATHS[index];
          imageDisplay.alt = ALT_TEXTS[index];
          imageDisplay.style.opacity = 1;
        }, 150);
      }

      /* ================================
         NO Button Logic
      ================================== */
      noButton.addEventListener("click", () => {
        if (noClickCount >= MAX_NO_CLICKS) return;

        noClickCount++;

        changeImage(noClickCount);

        buttonHeight += GROWTH_PER_CLICK;
        buttonWidth += GROWTH_PER_CLICK;
        fontSize += FONT_GROWTH_PER_CLICK;

        yesButton.style.height = `${buttonHeight}px`;
        yesButton.style.width = `${buttonWidth}px`;
        yesButton.style.fontSize = `${fontSize}px`;

        noButton.textContent = NO_BUTTON_MESSAGES[noClickCount];
      });

      /* ================================
         YES Button Logic
      ================================== */
      yesButton.addEventListener("click", () => {
        changeImage(IMAGE_PATHS.length - 1);

        valentineQuestion.textContent =
          "I love you sooo mucchhh!!!! Ummmmmmmaahhhh <3";

        responseButtons.style.display = "none";

        const heart = confetti.shapeFromPath({
          path: "M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z",
        });

        const defaults = {
          spread: 360,
          ticks: 100,
          gravity: 0,
          decay: 0.94,
          startVelocity: 20,
          shapes: [heart],
          colors: ["#ff69b4", "#ff1493", "#ff6b81", "#e84393"],
        };

        confetti({ ...defaults, particleCount: 50, scalar: 2 });
        confetti({ ...defaults, particleCount: 25, scalar: 3 });
        confetti({ ...defaults, particleCount: 10, scalar: 4 });
      });
    })();
  </script>
</body>
</html>
